SET SQL_SAFE_UPDATES = 0;

UPDATE `stretchy_report` SET `report_sql`='SELECT plnmst.plan_description AS `PLAN`,\ninvc.id AS `INV.NO`,\nDATE_FORMAT(invc.Invoice_date,\'%d-%m-%Y\') AS `INVOICE DATE`,\nchrg.client_id AS `CLIENTID`,\nclnt.display_name `CLIENT NAME`,\nDATE_FORMAT(chrg.charge_start_date,\'%d-%m-%Y\') as `FROM`,\nDATE_FORMAT(chrg.charge_end_date,\'%d-%m-%Y\') as `TO`,\ncast(round(chrg.charge_amount,2) as char) `CHARGE AMT`,\ncast(round(chrg.discount_amount,2)as char) `DISCOUNT AMT`,\ncast(round(ifnull(tax.Tax_amount,0),2) as char)  `TAX AMT`,\ncast(round(invc.invoice_amount,2) as char) `INVOICE AMT` \nFROM b_plan_master plnmst \nJOIN b_orders ord ON plnmst.id = ord.plan_id \nJOIN b_charge chrg ON chrg.order_id = ord.id \nJOIN b_bill_item invc ON invc.client_id = chrg.client_id AND invc.id = chrg.billitem_id AND charge_type = \'RC\'\nJOIN m_client clnt ON clnt.id = invc.client_id \nLEFT OUTER JOIN b_charge_tax tax ON tax.charge_id = chrg.id \nWHERE  (plnmst.id = \'${planId}\' or -1 = \'${planId}\') and invc.Invoice_date between \'${startDate}\' AND \'${endDate}\'\nGROUP BY plnmst.id,invc.id ORDER BY invc.id' WHERE report_name='Plan Wise Revenue Date Wise Details';

SET SQL_SAFE_UPDATES = 1;
